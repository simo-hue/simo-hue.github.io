{{ define "main" }}
<!-- Modern Post Header -->
<section
  class="relative overflow-hidden pt-20 pb-12 bg-gradient-to-b from-primary/5 via-transparent to-transparent dark:from-darkmode-primary/5">
  <!-- Decorative elements -->
  <div class="hero-blob bg-blue-400/20 w-96 h-96 rounded-full top-0 left-0 mix-blend-multiply dark:mix-blend-overlay">
  </div>
  <div
    class="hero-blob bg-purple-400/20 w-96 h-96 rounded-full bottom-0 right-0 mix-blend-multiply dark:mix-blend-overlay animation-delay-2000">
  </div>

  <div class="container relative z-10">
    <div class="max-w-4xl mx-auto text-center">
      <!-- Categories -->
      {{ if .Params.categories }}
      <div class="flex flex-wrap gap-2 justify-center mb-6">
        {{ range .Params.categories }}
        <span class="category-badge">
          {{ . }}
        </span>
        {{ end }}
      </div>
      {{ end }}

      <!-- Title -->
      <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold mb-6 tracking-tight">
        {{ .Title }}
      </h1>

      <!-- Description -->
      {{ if .Params.description }}
      <p class="text-lg md:text-xl opacity-80 mb-8 max-w-3xl mx-auto">
        {{ .Params.description }}
      </p>
      {{ end }}

      <!-- Meta Info -->
      <div class="flex flex-wrap items-center justify-center gap-6 text-sm opacity-70">
        <div class="flex items-center gap-2">
          <i class="far fa-calendar"></i>
          <time datetime="{{ .PublishDate }}">
            {{ .PublishDate.Format "January 02, 2006" }}
          </time>
        </div>

        {{ if .Params.author }}
        <div class="flex items-center gap-2">
          <i class="far fa-user"></i>
          <span>{{ .Params.author }}</span>
        </div>
        {{ end }}

        <div class="flex items-center gap-2">
          <i class="far fa-clock"></i>
          <span>{{ math.Round (div (countwords .Content) 200.0) }} min read</span>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Post Image -->
{{ if .Params.image }}
<section class="section pt-0">
  <div class="container">
    <div class="max-w-5xl mx-auto">
      <div class="rounded-2xl overflow-hidden shadow-2xl">
        {{ partial "image" (dict "Src" .Params.image "Alt" .Title "Class" "w-full" "Loading" "eager") }}
      </div>
    </div>
  </div>
</section>
{{ end }}

<!-- Post Content -->
<section class="section">
  <div class="container">
    <div class="row justify-center">
      <div class="lg:col-10">
        <div class="row gx-5">
          <!-- Content -->
          <div class="lg:col-8">
            <article class="prose prose-lg dark:prose-invert max-w-none">
              {{ .Content }}
            </article>


          </div>

          <!-- Sidebar -->
          <div class="lg:col-4">
            {{ $widget:= site.Params.widgets.sidebar }}
            {{ partialCached "widgets/widget-wrapper" ( dict "Widgets" $widget "Scope" . ) }}
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
{{ end }}