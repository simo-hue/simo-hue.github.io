{{- $title := "" -}}
{{- if .IsHome -}}
{{- $title = site.Title -}}
{{- else -}}
{{- $title = printf "%s | Simone Mattioli" .Title -}}
{{- end -}}
<title>{{ $title }}</title>

{{- $description := "" -}}
{{- if .Description -}}
{{- $description = .Description -}}
{{- else if .Summary -}}
{{- $description = .Summary | plainify | truncate 155 -}}
{{- else -}}
{{- $description = site.Params.metadata.description | default "Personal blog of Simone Mattioli" -}}
{{- end -}}
<meta name="description" content="{{ $description }}">

<link rel="canonical" href="{{ .Permalink }}">

{{- if or .Params.noindex (eq .Kind "404") -}}
<meta name="robots" content="noindex, nofollow">
{{- else -}}
<meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
{{- end -}}

<meta property="og:title" content="{{ if .IsHome }}{{ site.Title }}{{ else }}{{ .Title }}{{ end }}">
<meta property="og:description" content="{{ $description }}">
<meta property="og:type" content="{{ if .IsPage }}article{{ else }}website{{ end }}">
<meta property="og:url" content="{{ .Permalink }}">
<meta property="og:site_name" content="{{ site.Title }}">

{{- $ogImage := "" -}}
{{- if .Params.image -}}
{{- $ogImage = .Params.image | absURL -}}
{{- else if site.Params.metadata.image -}}
{{- $ogImage = site.Params.metadata.image | absURL -}}
{{- end -}}
{{- if $ogImage -}}
<meta property="og:image" content="{{ $ogImage }}">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
{{- end -}}

{{- if .IsPage -}}
<meta property="article:published_time" content='{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}'>
{{- if .Lastmod -}}
<meta property="article:modified_time" content='{{ .Lastmod.Format "2006-01-02T15:04:05Z07:00" }}'>
{{- end -}}
{{- with .Params.categories -}}
{{- range . -}}
<meta property="article:section" content="{{ . }}">
{{- end -}}
{{- end -}}
{{- with .Params.tags -}}
{{- range . -}}
<meta property="article:tag" content="{{ . }}">
{{- end -}}
{{- end -}}
{{- end -}}

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="{{ if .IsHome }}{{ site.Title }}{{ else }}{{ .Title }}{{ end }}">
<meta name="twitter:description" content="{{ $description }}">
{{- if $ogImage -}}
<meta name="twitter:image" content="{{ $ogImage }}">
{{- end -}}

<meta name="author" content='{{ site.Params.metadata.author | default "Simone Mattioli" }}'>

{{- with .Params.keywords -}}
<meta name="keywords" content='{{ delimit . ", " }}'>
{{- end -}}